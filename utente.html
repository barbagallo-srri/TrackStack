<!-- users.html -->
<!DOCTYPE html>
<html lang="it" data-bs-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TrackStack - Area Utente</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  
</head>
<body>

  <nav class="navbar  navbar-expand-md navbar-expand-xl bg-body-tertiary">
    <div class="container-fluid">
        <div class="collapse navbar-collapse d-flex justify-content-center" id="navbarNav"> 
            <div class="text-center"> 
                <a class="navbar-brand d-flex align-items-center justify-content-center" href="#">
                <img src="https://marcobarbagallo.altervista.org/Gallery/logo2.png" alt="Logo" width="25" height="25" class="d-inline-block align-content-center">
                <span id="nav-titolo" class="p-1">TrackStack</span>
                </a>
                <button class="navbar-toggler btn btn-sm btn-outline-success rounded-5" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="icon-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="white">
                      <path d="M18 18V20H6V18H18ZM21 11V13H3V11H21ZM18 4V6H6V4H18Z"></path>
                  </svg>
                  </span>
              </button>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <div class="navbar-nav">
                        <div class="row">
                          <div class="col">
                            <a class="nav-link p-2" href="home.html">
                              <div class="row">
                              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" height="20" width="20"><path d="M13 19H19V9.97815L12 4.53371L5 9.97815V19H11V13H13V19ZM21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V9.48907C3 9.18048 3.14247 8.88917 3.38606 8.69972L11.3861 2.47749C11.7472 2.19663 12.2528 2.19663 12.6139 2.47749L20.6139 8.69972C20.8575 8.88917 21 9.18048 21 9.48907V20Z"></path></svg>
                              <span>
                                Home
                              </span>
                            </div>
                            </a>
                          </div>
                          <div class="col">
                            <a class="nav-link p-2" href="playlist.html">
                              <div class="row">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" height="20" width="20"><path d="M4 5H20V3H4V5ZM20 9H4V7H20V9ZM3 11H10V13H14V11H21V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V11ZM16 13V15H8V13H5V19H19V13H16Z"></path></svg>
                                <span>Playlist</span>
                              </div>
                            </a>
                          </div> 
                          <div class="col"><a class="nav-link p-2" href="ricerca.html">
                            <div class="row">
                              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" height="20" width="20"><path d="M18.031 16.6168L22.3137 20.8995L20.8995 22.3137L16.6168 18.031C15.0769 19.263 13.124 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2C15.968 2 20 6.032 20 11C20 13.124 19.263 15.0769 18.031 16.6168ZM16.0247 15.8748C17.2475 14.6146 18 12.8956 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18C12.8956 18 14.6146 17.2475 15.8748 16.0247L16.0247 15.8748Z"></path></svg>
                              <span>
                                Cerca
                              </span>
                            </div>
                          </a></div>
                          <div class="col">
                            <a class="nav-link bg-success text-white rounded-5 shadow bg-opacity-50 p-2 active" aria-current="page" href="utente.html">
                              <div class="row">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" height="20" width="20"><path d="M4 22C4 17.5817 7.58172 14 12 14C16.4183 14 20 17.5817 20 22H18C18 18.6863 15.3137 16 12 16C8.68629 16 6 18.6863 6 22H4ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11Z"></path></svg>
                                <span>
                                  Profilo
                                </span>
                              </div>
                            </a>
                          </div>
                      </div>
                    </div>  
                </div>
            </div>
        </div>
    </div>
  </nav>

  <div class="container d-grid">
    
    <div class="row mt-3">
      <div class="col text-center">
        <h3>Area Utente</h3>
      </div>
    </div>
    
    <div class="row mt-3 justify-content-center">

      <div class="col-11 col-sm-12 col-md-6 p-4 mb-5 rounded-5 mt-2" id="schedaUtente">
        <h5 class="mb-4 text-center">Dati Account</h5>

        <div class="row justify-content-center mt-3 mb-3">
          <div class="col-auto ">
            <img src="img/user.svg" alt="" style="width:100px; height: 100px;" class="text-center" id="profilesvg">
          </div>
        </div>

        <div class="input-group mb-1 d-none" id="regNomeDataField">
            <span class="input-group-text col-5 col-sm-4 col-md-3 col-xl-4 col-xxl-3 bg-success bg-opacity-25 border border-success border-opacity-50 rounded-start-5 rounded-top-5 m-2 p-1" id="inputGroup-sizing-default">
              <div class="col text-center text-white">
                Nome
              </div>
            </span>
          <input type="text" id="regNomeData" name="regNomeData" class="form-control bg-black bg-opacity-25 border border-success border-opacity-25 rounded-end-5 rounded-bottom-5 m-1" disabled>
        </div>

        <div class="input-group mb-1 d-none" id="regCognomeDataField">
          <span class="input-group-text col-5 col-sm-4 col-md-3 col-xl-4 col-xxl-3 bg-success bg-opacity-25 border border-success border-opacity-50 rounded-start-5 rounded-top-5 m-2 p-1" id="inputGroup-sizing-default">
            <div class="col text-center text-white">
              Cognome
            </div>
          </span>
          <input type="text" id="regCognomeData" name="regCognomeData"  class="form-control bg-black bg-opacity-25 border border-success border-opacity-25 rounded-end-5 rounded-bottom-5 m-1" disabled>
        </div>

        <div class="input-group mb-1">
          <span class="input-group-text col-5 col-sm-4 col-md-3 col-xl-4 col-xxl-3 bg-success bg-opacity-25 border border-success border-opacity-50 rounded-start-5 rounded-top-5 m-2 p-1" id="inputGroup-sizing-default">
            <div class="col text-center text-white">
              Username
            </div>
          </span>
          <input type="text" id="regUsernameData" name="regUsernameData" class="form-control bg-black bg-opacity-25 border border-success border-opacity-25 rounded-end-5 rounded-bottom-5 m-1" disabled>
        </div>

        <div class="input-group mb-1">
          <span class="input-group-text col-5 col-sm-4 col-md-3 col-xl-4 col-xxl-3 bg-success bg-opacity-25 border border-success border-opacity-50 rounded-start-5 rounded-top-5 m-2 p-1" id="inputGroup-sizing-default">
           <div class="col text-center text-white">
            Email
           </div>
          </span>
          <input type="text" id="regEmailData" name="regEmailData" class="form-control bg-black bg-opacity-25 border border-success border-opacity-25 rounded-end-5 rounded-bottom-5 m-1" disabled>
        </div>

        <div class="input-group mb-1 d-none" id="regDataNascitaDataField">
          <span class="input-group-text col-5 col-sm-4 col-md-3 col-xl-4 col-xxl-3 bg-success bg-opacity-25 border border-success border-opacity-50 rounded-start-5 rounded-top-5 m-2 p-1" id="inputGroup-sizing-default">
            <div class="col text-center text-white">
              Data
            </div>
          </span>
          <input type="date" id="regDataNascitaData" name="regDataNascitaData" class="form-control bg-black bg-opacity-25 border border-success border-opacity-25 rounded-end-5 rounded-bottom-5 m-1" disabled>
        </div>

        <div class="row justify-content-center">

          <div class="col-auto">
            <div class="input-group mb-1" id="regGeneripreferiti">
              <div class="dropdown justify-content-center">
                <button class="btn btn-sm btn-outline-success dropdown-toggle rounded-5" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Scegli Generi
                </button>
                <ul class="dropdown-menu dropdown-menu-scrollable" id="genreList"></ul>
              </div>
            </div>
          </div>

          <div class="col-auto">
            <div class="input-group mb-1" id="regArtistiPreferiti">
              <div class="dropdown">
                <button class="btn btn-sm btn-outline-success dropdown-toggle rounded-5" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Scegli Artisti
                </button>
                <ul class="dropdown-menu dropdown-menu-scrollable" id="ArtistList"></ul>
              </div>
            </div>
          </div>

        </div>
        
       
        


        <div class="input-group mb-1 d-none" id="regOldPasswordDataField">
          <span class="input-group-text col-5 col-sm-4 col-md-3 col-xl-4 col-xxl-3 bg-success bg-opacity-25 border border-success border-opacity-50 rounded-start-5 rounded-top-5 m-2 p-1" id="inputGroup-sizing-default">
            <div class="col text-center text-white">
              Password
            </div>
          </span>
          <input type="password" id="regOldPasswordData" name="regOldPasswordData" class="form-control bg-black bg-opacity-25 border border-success border-opacity-25 rounded-end-5 rounded-bottom-5 m-1" placeholder="Password Attuale" disabled>
        </div>

        <div class="input-group mb-1 d-none" id="regNewPasswordDataField">
          <span class="input-group-text col-5 col-sm-4 col-md-3 col-xl-4 col-xxl-3 bg-success bg-opacity-25 border border-success border-opacity-50 rounded-start-5 rounded-top-5 m-2 p-1" id="inputGroup-sizing-default">
            <div class="col text-center text-white">
              Cambia Psw
            </div>
          </span>
          <input  type="password" id="regNewPasswordData" name="regNewPasswordData" class="form-control bg-black bg-opacity-25 border border-success border-opacity-25 rounded-end-5 rounded-bottom-5 m-1" placeholder="Password Nuova" disabled>
        </div>

        <div class="input-group mt-3">
          <div class="col text-center">
            <button type="button" id="enableModify" class="btn btn-outline-success rounded-5" onclick="enableModify()">Modifica</button>
            <button type="button" id="modifyUser" class="btn btn-success rounded-5 d-none" onclick="modifyUser()">Salva</button>
            <button type="button" id="disableUser" class="btn btn-outline-success rounded-5 d-none" onclick="disableModify()">Annulla</button>
          </div>
        </div>
     
      </div>

      <div class="col-12 col-sm-12 col-md-5 mb-5 rounded-5 mt-2" id="eliminaUtente">
  
        <form id="deleteAccountForm" action="/delete" method="post" class="p-4 rounded-5 mx-3 mb-3 mb-sm-3 mb-md-5">

          <div class="row">
            <h5 class="mb-5 mt-1 text-center">Gestisci Account</h5>
          </div>

          <div class="row-auto text-center mb-4">
            <button href="#" class="btn btn-success rounded-5" onclick="logout()">Logout</a>
          </div>

          <div class="row-auto text-center mb-4">
            <p>oppure</p>
          </div>

          <div class="row">

            <div class="input-group mb-1 d-none" id="delUsername">
              <span class="input-group-text col-4 col-md-4 col-xl-4 col-xxl-3 bg-danger bg-opacity-25 border border-danger border-opacity-50 rounded-start-5 rounded-top-5 m-2 p-1" id="inputGroup-sizing-default">
                <div class="col text-center text-white">
                  Username
                </div>
              </span>
              <input type="text" id="deleteUsername" name="deleteUsername" class="form-control bg-black bg-opacity-25 border border-danger border-opacity-25 rounded-end-5 rounded-bottom-5 m-1" disabled required>
            </div>

            <div class="input-group mb-1 d-none" id="delPassword">
              <span class="input-group-text col-4 col-md-4 col-xl-4 col-xxl-3 bg-danger bg-opacity-25 border border-danger border-opacity-50 rounded-start-5 rounded-top-5 m-2 p-1" id="inputGroup-sizing-default">
                <div class="col text-center text-white">
                  Password
                </div>
              </span>
              <input type="password" id="deletePassword" name="deletePassword" class="form-control bg-black bg-opacity-25 border border-danger border-opacity-25 rounded-end-5 rounded-bottom-5 m-1" required>
            </div>

              <p id="deleteSbagliato" style="color: #CF4053" class="text-center d-none">Username o Password errati</p>
            <div class="row-auto text-center">
              <button type="button" id="eliminaAccount" class="btn btn-outline-danger rounded-5" onclick="enableDelete()">Elimina Account</button>
            </div>
            <div class="row-auto text-center mt-3 mb-4">
              <button type="button" id="confermaDelete" class="btn btn-danger rounded-5 d-none" onclick="deleteAccount()">Conferma</button>
              <button type="button" id="annullDelete" class="btn btn-outline-danger rounded-5 d-none" onclick="annullaDelete()">Annulla</button>
            </div>
          </div>
        </form>

      </div>




    </div>


    <div class="container mt-5">
      <div class="row">
        <div class="col-md-6">
          <h3>Generi Musicali</h3>
        </div>
      </div>
    </div>


  

  </div>

  <script src="functions.js"></script>
  <script src="spotifyApi.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
  <script>
    // Richiama la funzione per ottenere i dati dell'utente dopo il login
    document.addEventListener('DOMContentLoaded', getUserData);
  </script>
  <script>
    document.addEventListener('click', function(event) {
    const dropdownMenu = document.getElementById('genreList');
    const dropdownToggle = document.querySelector('[data-bs-toggle="dropdown"]');
    if (!dropdownMenu.contains(event.target) && !dropdownToggle.contains(event.target)) {
    dropdownMenu.classList.remove('show');
  }
});
  </script>
  <script>ottienigeneri()</script>
  
</body>
</html>

